"use strict";angular.module("n",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","angularMoment","duScroll"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){e.state("home",{url:"/",templateUrl:"app/views/frontpage.html"}),t.otherwise("/"),o.html5Mode(!0)}]).run(["amMoment",function(e){e.changeLocale("pt")}]),angular.module("n").factory("News",["$q","$http",function(e,t){return{getSources:function(){var t=e.defer(),o=function(){var e=new Date,t=e.getDate(),o=e.getMonth()+1,n=e.getFullYear();return 10>t&&(t="0"+t),10>o&&(o="0"+o),e={normal:t+"-"+o+"-"+n,slashes:n+"/"+o+"/"+t,none:n+o+t}}(),n=[{name:"Público",icon:"http://www.publico.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/publico/publico-"+o.normal+".jpg",url:"http://feeds.feedburner.com/PublicoRSS"},{name:"iOnline",icon:"http://ionline.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/jornal-i/jornal-i-"+o.normal+".jpg",url:"http://feeds.feedburner.com/jornali"},{name:"Expresso",icon:"http://expresso.sapo.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/expresso/expresso-"+o.normal+".jpg",url:"http://expresso.sapo.pt/static/rss/atualidade--arquivo_23412.xml"},{name:"Observador",icon:"http://cdn2.obsnocookie.com/wp-content/themes/observador/assets/build/img/favicon.ico",url:"http://observador.pt/feed/"},{name:"Abola",icon:"http://www.abola.pt/img/layout/favicon.ico",cover:"http://www.sempreonline.net/images/capas/a-bola/a-bola-"+o.normal+".jpg",url:"http://rss.feedsportal.com/c/32502/f/480420/index.rss"},{name:"Sol",icon:"http://sol.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/sol/sol-"+o.normal+".jpg",url:"http://sol.pt/RSS/"},{name:"Jornal de Notícias",icon:"http://www.jn.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/jornal-de-noticias/jornal-de-noticias-"+o.normal+".jpg",url:"http://feeds.jn.pt/JN-ULTIMAS"},{name:"Diário de Notícias",icon:"http://www.dn.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/diario-de-noticias/diario-de-noticias-"+o.normal+".jpg",url:"http://feeds.dn.pt/DN-Ultimas"},{name:"Visão",icon:"http://visao.sapo.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/visao/visao-"+o.normal+".jpg",url:"http://visao.sapo.pt/static/rss/visao-geral.xml"},{name:"Sábado",icon:"http://www.sabado.pt/favicon.ico",cover:"http://www.sempreonline.net/images/capas/sabado/sabado-"+o.normal+".jpg",url:"http://www.sabado.pt/rss.html"}];return t.resolve(n),t.promise},getFeed:function(e){return t.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=50&callback=JSON_CALLBACK&q="+encodeURIComponent(e))}}}]),angular.module("n").filter("trim",function(){return function(e){return String(e).replace(/<[^>]+>/gm,"")}}),angular.module("n").controller("AppCtrl",["$scope","$http","News",function(e,t,o){o.getSources().then(function(t){e.sources=t}),e.getNews=function(t){o.getFeed(t.url).then(function(o){e.news=o.data.responseData.feed.entries,e.source=t},function(e){console.log("Error getting news for "+t.name,e)})}}]),angular.module("n").directive("toggle",function(){return{restrict:"A",link:function(e,t){t.bind("click",function(){t.toggleClass("toggle-view")})}}}),angular.module("n").run(["$templateCache",function(e){e.put("app/views/frontpage.html",'<div class="container" ng-init="getNews(sources[0])"><header><img src="/icon.png" alt="n"></header><div class="source-list" du-scrollspy="content"><img class="icon" ng-src="{{ source.icon }}" alt="{{ source.name }}"><select ng-model="source" ng-options="source as source.name for source in sources" ng-change="getNews(source)"></select></div><div id="content"><div class="cover" ng-if="source.cover"><img ng-src="{{ source.cover }}" alt="{{ source.name }}"></div><ul class="news" ng-class="{ \'no-cover\': !source.cover }"><li ng-repeat="article in news" ng-if="article.content | trim"><article><a href="{{ article.link }}" target="_blank" title="{{ article.title }}"><h2>{{ article.title }} <span class="categories" ng-if="article.categories"><em ng-repeat="category in article.categories">{{ category }}</em></span></h2></a><p class="meta" ng-if="article.author || article.publishedDate"><span class="author" ng-if="article.author">{{ article.author }},</span> <span class="date" ng-if="article.publishedDate">{{ article.publishedDate | amDateFormat: \'LL\' }}</span></p><div class="content" toggle="" ng-if="article.contentSnippet"><p class="snippet">{{ article.contentSnippet | trim }}</p><p class="full">{{ article.content | trim }}</p></div></article></li></ul></div></div>')}]);